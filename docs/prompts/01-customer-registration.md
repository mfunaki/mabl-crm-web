# mabl-crm-web - 顧客新規登録

## テスト概要

- **対象URL**: https://mabl-crm-web-ixi7x7b23a-an.a.run.app/login
- **テスト名**: mabl-crm-web - 顧客新規登録
- **目的**: 管理者アカウントでログインし、新規顧客を登録して一覧に正しく反映されることを確認する
- **ラベル**: `ai-generated`, `auth`, `customer`
- **説明**: 管理者権限を持つユーザーがログインし、新規顧客登録フォームに情報を入力して保存できることを確認するエンドツーエンドテスト。認証フローと顧客作成フローを一連の操作として検証する。登録後は顧客一覧に正しく反映されることもあわせて確認する。

## 画面構成

### ログイン画面（/login）

- メールアドレス入力欄（上部）
- パスワード入力欄（下部）
- 「ログイン」ボタン

### 顧客一覧画面（/customers）

- 検索入力欄・ステータスフィルター・「検索」ボタン・「＋ 新規登録」ボタン（上部）
- 顧客テーブル（顧客名・会社名・メール・電話番号・ステータス・操作列）

### 顧客新規登録画面（/customers/new）

- 顧客名入力欄
- メールアドレス入力欄
- 電話番号入力欄
- 会社名入力欄
- ステータス選択（「見込み」「取引中」「休眠」）
- メモ入力欄
- 「保存」ボタン・「キャンセル」ボタン

## テスト手順

### 1. ログイン

1. `https://mabl-crm-web-ixi7x7b23a-an.a.run.app/login` に直接アクセスする
2. URL が `/login` であることを確認する
3. 「ログイン」ボタン（data-testid="login-button"）が表示されていることを確認する
4. メールアドレス入力欄（data-testid="email-input"）に mabl クレデンシャル「管理者アカウント」の ID を入力する
5. パスワード入力欄（data-testid="password-input"）に mabl クレデンシャル「管理者アカウント」のパスワードを入力する
6. 「ログイン」ボタン（data-testid="login-button"）をクリックする
7. URL が `/` にリダイレクトされることを確認する

### 2. 顧客一覧画面への遷移

8. 左サイドバーの「顧客管理」をクリックする
9. URL が `/customers` であることを確認する
10. 顧客テーブル（data-testid="customers-table"）が表示されていることを確認する

### 3. 新規登録フォームへの遷移

11. 「＋ 新規登録」ボタン（data-testid="new-customer-button"）をクリックする
12. URL が `/customers/new` であることを確認する

### 4. フォームへの入力と登録

13. 顧客名入力欄（data-testid="name-input"）に「サンプル 花子」と入力する
14. メールアドレス入力欄（data-testid="email-input"）に「sample.hanako@example.co.jp」と入力する
15. 電話番号入力欄（data-testid="phone-input"）に「03-9999-8888」と入力する
16. 会社名入力欄（data-testid="company-input"）に「サンプル株式会社」と入力する
17. ステータス選択（data-testid="status-select"）で「見込み」を選択する
18. 「保存」ボタン（data-testid="save-button"）をクリックする

### 5. 登録結果の確認

19. URL が `/customers` にリダイレクトされることを確認する
20. 顧客テーブルに「サンプル 花子」が含まれていることを確認する
21. 「サンプル 花子」の行のステータスに「見込み」と表示されていることを確認する

## 期待される結果

- ログイン後、ダッシュボードに遷移すること
- 新規登録フォームに入力した内容で顧客が作成されること
- 登録後、顧客一覧画面にリダイレクトされること
- 顧客テーブルに「サンプル 花子」が表示されること
- ステータスが「見込み」で登録されていること

## 注意事項

- 本テストで登録した「サンプル 花子」は本番 DB に残ります。テスト後に手動で削除するか、削除テストと組み合わせて実行してください。
- ログインには mabl クレデンシャル「管理者アカウント」を使用してください。認証情報をプロンプトに直接記述しないでください。
- ステータス選択は `<select>` 要素です。「見込み」は内部値 `PROSPECT` に対応します。
